# 小红书工具箱 - 智能文件处理平台

## 项目概述

小红书工具箱是一个基于Web界面的智能文件处理平台，提供多种实用的文件操作工具，包括图片处理、视频转换、文件管理等功能。项目采用Python后端 + HTML/JavaScript前端的架构，支持实时输出显示和进度追踪。

## 项目功能

### 核心工具

1. **自动创建并复制** - 创建文件夹并随机复制图片
2. **MD5值修改** - 通过添加随机字节改变文件MD5值
3. **批量解压缩** - 自动解压所有ZIP压缩文件
4. **视频转WebP动图** - 批量将视频文件转换为WebP格式
5. **WebP重新生成** - 重新生成超过阈值的WebP文件
6. **批量重命名文件** - 重命名为"文件夹名_编号.扩展名"格式
7. **Excel批量处理** - 批量清空Excel文件的特定单元格
8. **批量创建文件夹** - 在指定目录下创建编号文件夹
9. **智能文件复制** - 随机分配图片到各个子目录
10. **终止按钮测试** - 测试Web界面终止按钮功能

### 界面特性

- **现代化设计** - 简洁科技风格的用户界面
- **实时输出** - 支持脚本执行过程的实时输出显示
- **进度追踪** - 可视化进度条显示执行进度
- **错误处理** - 完善的错误提示和异常处理
- **响应式布局** - 支持不同屏幕尺寸的自适应显示

## 目录结构

```
小红书工具箱/
├── index.html                  # 主界面文件
├── README.md                   # 项目说明文档
├── environment/                # 前端资源目录
│   ├── server.py              # Web服务器主程序
│   ├── styles.css             # 界面样式文件
│   └── script.js              # 前端交互脚本
├── Claude/                     # 主要工具脚本目录
│   ├── Auto_build_and_copy.py # 自动创建并复制工具
│   ├── Build_folder.py        # 文件夹创建工具
│   ├── Copy_files.py          # 文件复制工具
│   ├── Excel_renew.py         # Excel处理工具
│   ├── Md5_renew.py          # MD5修改工具
│   ├── Rename_files.py       # 文件重命名工具
│   ├── Test_stop_button.py   # 终止按钮测试工具
│   ├── Unzip.py              # 解压缩工具
│   ├── Webp_resize.py        # WebP重新生成工具
│   └── Webp_video_to_img.py  # 视频转WebP工具
└── Gemini/                    # 备用工具脚本目录
    └── Webp_video_to_img_Gemini2.5pro.py
```

## 技术栈

### 后端技术
- **Python 3.7+** - 主要编程语言
- **subprocess** - 进程管理和脚本执行
- **http.server** - Web服务器框架
- **pathlib** - 现代化路径处理
- **threading** - 多线程支持

### 前端技术
- **HTML5** - 页面结构
- **CSS3** - 样式设计（使用现代CSS特性）
- **JavaScript ES6+** - 交互逻辑
- **Fetch API** - 异步数据传输
- **WebStreams** - 实时数据流处理

### 外部依赖
- **FFmpeg** - 视频处理（视频转WebP功能需要）
- **openpyxl** - Excel文件处理
- **Pillow** - 图片处理

## 安装与运行

### 环境要求

1. **Python 环境**
   ```bash
   Python 3.7 或更高版本
   ```

2. **依赖包安装**
   ```bash
   pip install openpyxl pillow
   ```

3. **FFmpeg安装**（可选，视频转换功能需要）
   - Windows: 下载FFmpeg并添加到PATH
   - macOS: `brew install ffmpeg`
   - Linux: `sudo apt-get install ffmpeg`

### 启动步骤

1. **启动后端服务器**
   ```bash
   cd environment
   python server.py
   ```

2. **打开Web界面**
   - 在浏览器中打开项目根目录的 `index.html` 文件
   - 或访问 `http://localhost:8000`（如果服务器支持静态文件服务）

3. **开始使用**
   - 选择需要的工具
   - 填写相应参数
   - 点击执行按钮开始处理

## 使用说明

### 基本操作流程

1. **选择工具** - 点击左侧工具列表中的工具项展开参数设置
2. **设置参数** - 根据工具要求填写目录路径、数量等参数
3. **执行工具** - 点击"开始执行"按钮启动处理
4. **查看输出** - 在右侧输出面板实时查看执行进度和结果
5. **中断执行** - 必要时可点击"终止执行"按钮停止处理

### 常用工具说明

#### 视频转WebP工具
- **功能**: 将视频文件转换为WebP动图格式
- **参数**: 视频目录路径、转换时长、覆盖模式
- **输出**: 与原视频同目录的.webp文件

#### 批量重命名工具
- **功能**: 将文件重命名为"文件夹名_编号.扩展名"格式
- **参数**: 目标目录路径
- **输出**: 重命名后的文件

#### MD5修改工具
- **功能**: 通过添加随机字节修改文件MD5值
- **参数**: 图片目录路径、随机字节数
- **输出**: MD5值已修改的文件

## 注意事项

### 系统兼容性
- **Windows** - 完全支持，推荐使用
- **macOS** - 基本支持，某些功能可能需要额外配置
- **Linux** - 基本支持，建议在Ubuntu等主流发行版使用

### 性能考虑
- **文件处理** - 大量文件处理时请确保足够的磁盘空间
- **内存使用** - 处理大文件时注意内存占用情况
- **网络连接** - 前端需要与后端服务器保持连接

### 安全提醒
- **路径安全** - 请确保输入的路径安全可靠
- **权限检查** - 确保对目标目录有读写权限
- **备份数据** - 重要文件处理前请先备份

### 错误处理
- **网络中断** - 如果连接中断，请重启服务器
- **进程卡死** - 使用"重启服务"功能强制中断所有任务
- **权限错误** - 以管理员身份运行或检查文件权限

## 更新日志

### 最新版本特性
- ✅ 优化了视频转WebP工具的输出显示
- ✅ 改进了实时进度条功能
- ✅ 增强了错误处理和用户提示
- ✅ 优化了前端界面交互体验
- ✅ 改进了服务器端输出处理逻辑

### 已知问题
- 某些情况下FFmpeg进程可能无法正常终止
- 大文件处理时可能出现内存占用过高
- 部分浏览器可能不支持实时流输出

## 开发信息

- **开发语言**: Python, HTML, CSS, JavaScript
- **开发环境**: Windows 11
- **代码风格**: 采用函数级注释，模块化设计
- **维护状态**: 持续更新维护

## 许可证

本项目采用开源许可证，仅供学习和个人使用。

---

**联系信息**: 如有问题或建议，请通过GitHub Issues或邮件联系。

**最后更新**: 2024年12月